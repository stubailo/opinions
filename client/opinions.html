<template name="opinions">
  {{#each opinions topicId}}
    {{> opinionListItem}}
  {{/each}}

  {{> newOpinion topicId=topicId}}
</template>

<template name="opinionListItem">
  <div class="opinion">
    <div class="row">
      <div class="col-md-2">
        {{> pointsWidget}}
      </div>
      <div class="col-md-10">
        <h4>{{createdByUsername}}, {{calendarize createdAt}}</h4>
        {{#markdown}}{{content}}{{/markdown}}
      </div>
    </div>
  </div>
</template>

<template name="pointsWidget">
  {{numPoints}} {{pluralize "point" numPoints}}

  <div class="btn-group">
    <button class="btn {{#if upvoted}}btn-success{{else}}btn-default{{/if}} btn-sm" data-action="upvote">
      <span class="glyphicon glyphicon-plus"></span></button>
    <button class="btn {{#if downvoted}}btn-danger{{else}}btn-default{{/if}} btn-sm" data-action="downvote">
      <span class="glyphicon glyphicon-minus"></span></button>
  </div>
</template>

<template name="newOpinion">
  <form role="form">
    <h3>Post a new Opinion</h3>

    <div class="form-group">
      <label class="hidden" for="content">Content</label>
      <textarea name="content" class="form-control"></textarea>
    </div>

    <button type="submit" class="btn btn-default">Save</button>

    {{#if formError}}
      <div class="form-error">{{messageFor formError}}</div>
    {{/if}}
  </form>
</template>

